<UserControl x:Class="WordVersionControl.RepoSidebar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="#f8f9fa">

	<DockPanel>
		<StackPanel DockPanel.Dock="Top" Margin="4">
			<TextBlock Text="文档版本历史"
                   FontSize="16"
                   FontWeight="Bold"
                   HorizontalAlignment="Stretch"
                   TextAlignment="Center"
                   Margin="0,6"/>
		</StackPanel>
		<!-- 列表 -->
		<ListView x:Name="CommitList"
                  Margin="4"
                  BorderThickness="0"
                  Background="Transparent"
                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                  SelectionMode="Single"
				  SelectionChanged="CommitList_SelectionChanged">
			<ListView.ItemTemplate>
				<DataTemplate>
					<Border BorderBrush="#DDD" BorderThickness="0,0,0,1" Padding="6" Margin="0,2">
						<StackPanel>
							<!-- 第一行：commit id + author -->
							<Grid MinWidth="200">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*" />
									<ColumnDefinition Width="Auto" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="{Binding commit_id}"
                                           FontWeight="Bold"
                                           Foreground="#333"
                                           VerticalAlignment="Center"/>
								<TextBlock Text="{Binding author}"
                                           Grid.Column="1"
                                           Foreground="#666"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Right"/>
							</Grid>

							<!-- 第二行：时间 -->
							<TextBlock Text="{Binding date}"
                                       Foreground="#888"
                                       FontSize="11"
                                       Margin="0,2,0,0"/>

							<!-- 第三行：消息 -->
							<TextBlock Text="{Binding message}"
                                       Foreground="#222"
                                       FontSize="12"
                                       TextTrimming="CharacterEllipsis"
                                       MaxWidth="200"
                                       Margin="0,2,0,0"/>
						</StackPanel>
					</Border>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>
	</DockPanel>
</UserControl>